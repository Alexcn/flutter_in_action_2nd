<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>14.1 Flutter UI 框架（Framework） | 《Flutter实战·第二版》- Preview</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/logo.png">
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.c0f2585a.css" as="style"><link rel="preload" href="/assets/js/app.6f38b3d1.js" as="script"><link rel="preload" href="/assets/js/41.00598830.js" as="script"><link rel="preload" href="/assets/js/2.aa63fc2b.js" as="script"><link rel="preload" href="/assets/js/111.c4e67756.js" as="script"><link rel="prefetch" href="/assets/js/10.f63cad85.js"><link rel="prefetch" href="/assets/js/100.b697dd8c.js"><link rel="prefetch" href="/assets/js/101.e4be1fb7.js"><link rel="prefetch" href="/assets/js/102.ed9cdd4e.js"><link rel="prefetch" href="/assets/js/103.05a38680.js"><link rel="prefetch" href="/assets/js/104.3d56d675.js"><link rel="prefetch" href="/assets/js/105.9169e82d.js"><link rel="prefetch" href="/assets/js/106.7e1551d8.js"><link rel="prefetch" href="/assets/js/107.c13edd9d.js"><link rel="prefetch" href="/assets/js/108.d8e6cef0.js"><link rel="prefetch" href="/assets/js/109.c4cebafe.js"><link rel="prefetch" href="/assets/js/11.856f1f89.js"><link rel="prefetch" href="/assets/js/110.e074dae6.js"><link rel="prefetch" href="/assets/js/112.7d6573de.js"><link rel="prefetch" href="/assets/js/113.8db350a5.js"><link rel="prefetch" href="/assets/js/114.c24d932d.js"><link rel="prefetch" href="/assets/js/115.6f318a9f.js"><link rel="prefetch" href="/assets/js/116.0554400b.js"><link rel="prefetch" href="/assets/js/117.d322fb1a.js"><link rel="prefetch" href="/assets/js/118.b4ef5dd9.js"><link rel="prefetch" href="/assets/js/119.f4c1acc3.js"><link rel="prefetch" href="/assets/js/12.edf8cd73.js"><link rel="prefetch" href="/assets/js/120.56260b59.js"><link rel="prefetch" href="/assets/js/121.7322b21f.js"><link rel="prefetch" href="/assets/js/122.b1074a83.js"><link rel="prefetch" href="/assets/js/123.49f60ba7.js"><link rel="prefetch" href="/assets/js/124.0a4f5a2e.js"><link rel="prefetch" href="/assets/js/125.563206f4.js"><link rel="prefetch" href="/assets/js/126.a89e73fb.js"><link rel="prefetch" href="/assets/js/127.90737880.js"><link rel="prefetch" href="/assets/js/128.038fd4ee.js"><link rel="prefetch" href="/assets/js/129.d862f516.js"><link rel="prefetch" href="/assets/js/13.2b91b622.js"><link rel="prefetch" href="/assets/js/130.37330165.js"><link rel="prefetch" href="/assets/js/131.33f50edb.js"><link rel="prefetch" href="/assets/js/132.1fbede71.js"><link rel="prefetch" href="/assets/js/133.18016ee4.js"><link rel="prefetch" href="/assets/js/134.9111f7ad.js"><link rel="prefetch" href="/assets/js/135.be23d69c.js"><link rel="prefetch" href="/assets/js/136.2ef3e106.js"><link rel="prefetch" href="/assets/js/137.484db695.js"><link rel="prefetch" href="/assets/js/138.f16ddf38.js"><link rel="prefetch" href="/assets/js/139.111469c8.js"><link rel="prefetch" href="/assets/js/14.cd95ce0e.js"><link rel="prefetch" href="/assets/js/140.5be8989f.js"><link rel="prefetch" href="/assets/js/141.ff8521da.js"><link rel="prefetch" href="/assets/js/15.5f1d0f97.js"><link rel="prefetch" href="/assets/js/16.80c02877.js"><link rel="prefetch" href="/assets/js/17.1f2de74a.js"><link rel="prefetch" href="/assets/js/18.2756a86a.js"><link rel="prefetch" href="/assets/js/19.16a75dd3.js"><link rel="prefetch" href="/assets/js/20.f5b15c12.js"><link rel="prefetch" href="/assets/js/21.6817cf7a.js"><link rel="prefetch" href="/assets/js/22.7324891c.js"><link rel="prefetch" href="/assets/js/23.3470f74d.js"><link rel="prefetch" href="/assets/js/24.84701f9b.js"><link rel="prefetch" href="/assets/js/25.3c7ceabe.js"><link rel="prefetch" href="/assets/js/26.8c2eecc7.js"><link rel="prefetch" href="/assets/js/27.c68eb0cd.js"><link rel="prefetch" href="/assets/js/28.3a22b34a.js"><link rel="prefetch" href="/assets/js/29.b1b6395c.js"><link rel="prefetch" href="/assets/js/3.aa2c6191.js"><link rel="prefetch" href="/assets/js/30.8303d703.js"><link rel="prefetch" href="/assets/js/31.70be727a.js"><link rel="prefetch" href="/assets/js/32.23ec697a.js"><link rel="prefetch" href="/assets/js/33.3df99ef2.js"><link rel="prefetch" href="/assets/js/34.7a7a05e9.js"><link rel="prefetch" href="/assets/js/35.96b0f511.js"><link rel="prefetch" href="/assets/js/36.cf5a79f6.js"><link rel="prefetch" href="/assets/js/37.6572d0b5.js"><link rel="prefetch" href="/assets/js/38.d3604c78.js"><link rel="prefetch" href="/assets/js/39.bd812560.js"><link rel="prefetch" href="/assets/js/4.086e2494.js"><link rel="prefetch" href="/assets/js/40.c8541d1c.js"><link rel="prefetch" href="/assets/js/42.178a4635.js"><link rel="prefetch" href="/assets/js/43.0ddccd57.js"><link rel="prefetch" href="/assets/js/44.890b8870.js"><link rel="prefetch" href="/assets/js/45.110f3e6b.js"><link rel="prefetch" href="/assets/js/46.4eb60b42.js"><link rel="prefetch" href="/assets/js/47.b3a29682.js"><link rel="prefetch" href="/assets/js/48.d444afb5.js"><link rel="prefetch" href="/assets/js/49.4607c43d.js"><link rel="prefetch" href="/assets/js/5.edc72510.js"><link rel="prefetch" href="/assets/js/50.8c1fef3f.js"><link rel="prefetch" href="/assets/js/51.224f6f98.js"><link rel="prefetch" href="/assets/js/52.a3159c2e.js"><link rel="prefetch" href="/assets/js/53.939e1872.js"><link rel="prefetch" href="/assets/js/54.c0777ddf.js"><link rel="prefetch" href="/assets/js/55.30605ad1.js"><link rel="prefetch" href="/assets/js/56.2be9a56e.js"><link rel="prefetch" href="/assets/js/57.bfb5d8e5.js"><link rel="prefetch" href="/assets/js/58.32ca1e5f.js"><link rel="prefetch" href="/assets/js/59.bf1fa1f7.js"><link rel="prefetch" href="/assets/js/6.7e615c33.js"><link rel="prefetch" href="/assets/js/60.30549e5c.js"><link rel="prefetch" href="/assets/js/61.8b3b5452.js"><link rel="prefetch" href="/assets/js/62.4bd7797a.js"><link rel="prefetch" href="/assets/js/63.353c029c.js"><link rel="prefetch" href="/assets/js/64.a021f513.js"><link rel="prefetch" href="/assets/js/65.dee1ae42.js"><link rel="prefetch" href="/assets/js/66.d223418a.js"><link rel="prefetch" href="/assets/js/67.46a4d352.js"><link rel="prefetch" href="/assets/js/68.156c52c3.js"><link rel="prefetch" href="/assets/js/69.95fe189d.js"><link rel="prefetch" href="/assets/js/7.d4340185.js"><link rel="prefetch" href="/assets/js/70.3d900deb.js"><link rel="prefetch" href="/assets/js/71.3150ae7b.js"><link rel="prefetch" href="/assets/js/72.b0710837.js"><link rel="prefetch" href="/assets/js/73.bc088e73.js"><link rel="prefetch" href="/assets/js/74.01de8e2d.js"><link rel="prefetch" href="/assets/js/75.59f00ba2.js"><link rel="prefetch" href="/assets/js/76.304be238.js"><link rel="prefetch" href="/assets/js/77.dac808f9.js"><link rel="prefetch" href="/assets/js/78.10e9dc1c.js"><link rel="prefetch" href="/assets/js/79.853c563b.js"><link rel="prefetch" href="/assets/js/8.f15c27ae.js"><link rel="prefetch" href="/assets/js/80.edc31e5a.js"><link rel="prefetch" href="/assets/js/81.88ea2232.js"><link rel="prefetch" href="/assets/js/82.8dfc33ed.js"><link rel="prefetch" href="/assets/js/83.1833a9a2.js"><link rel="prefetch" href="/assets/js/84.47584b09.js"><link rel="prefetch" href="/assets/js/85.495248a8.js"><link rel="prefetch" href="/assets/js/86.5f005f9e.js"><link rel="prefetch" href="/assets/js/87.135f0d93.js"><link rel="prefetch" href="/assets/js/88.fdac9731.js"><link rel="prefetch" href="/assets/js/89.6f43afb8.js"><link rel="prefetch" href="/assets/js/9.a7f23ce1.js"><link rel="prefetch" href="/assets/js/90.929841f1.js"><link rel="prefetch" href="/assets/js/91.8861b587.js"><link rel="prefetch" href="/assets/js/92.c7779984.js"><link rel="prefetch" href="/assets/js/93.5c67f297.js"><link rel="prefetch" href="/assets/js/94.e03d09fb.js"><link rel="prefetch" href="/assets/js/95.b3133bb2.js"><link rel="prefetch" href="/assets/js/96.5708f2d8.js"><link rel="prefetch" href="/assets/js/97.d532a55c.js"><link rel="prefetch" href="/assets/js/98.60f4dd99.js"><link rel="prefetch" href="/assets/js/99.409881df.js">
    <link rel="stylesheet" href="/assets/css/0.styles.c0f2585a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="《Flutter实战·第二版》- Preview" class="logo"> <span class="site-name can-hide">《Flutter实战·第二版》- Preview</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/join_us.html" class="nav-link">
  和作者做同事
</a></div><div class="nav-item"><a href="https://github.com/flutterchina" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Flutter中国
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/flutterchina/flutter_in_action_2nd" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/join_us.html" class="nav-link">
  和作者做同事
</a></div><div class="nav-item"><a href="https://github.com/flutterchina" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Flutter中国
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/flutterchina/flutter_in_action_2nd" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/preface.html" class="sidebar-link">第二版序</a></li><li><section class="sidebar-group depth-0"><a href="/chapter1/index" class="sidebar-heading clickable"><span>第一章：起步</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/chapter1/mobile_development_intro.html" class="sidebar-link">1.1 移动开发技术简介</a></li><li><a href="/chapter1/flutter_intro.html" class="sidebar-link">1.2 初识 Flutter</a></li><li><a href="/chapter1/install_flutter.html" class="sidebar-link">1.3 搭建Flutter开发环境</a></li><li><a href="/chapter1/dart.html" class="sidebar-link">1.4 Dart语言简介</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/chapter2/index" class="sidebar-heading clickable"><span>第二章：第一个Flutter应用</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/chapter2/first_flutter_app.html" class="sidebar-link">2.1 计数器应用示例</a></li><li><a href="/chapter2/flutter_widget_intro.html" class="sidebar-link">2.2  Widget 简介</a></li><li><a href="/chapter2/state_manage.html" class="sidebar-link">2.3 状态管理</a></li><li><a href="/chapter2/flutter_router.html" class="sidebar-link">2.4 路由管理</a></li><li><a href="/chapter2/flutter_package_mgr.html" class="sidebar-link">2.5 包管理</a></li><li><a href="/chapter2/flutter_assets_mgr.html" class="sidebar-link">2.6 资源管理</a></li><li><a href="/chapter2/flutter_app_debug.html" class="sidebar-link">2.7 调试Flutter应用</a></li><li><a href="/chapter2/thread_model_and_error_report.html" class="sidebar-link">2.8 Flutter异常捕获</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/chapter3/index" class="sidebar-heading clickable"><span>第三章：基础组件</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/chapter3/text.html" class="sidebar-link">3.1 文本及样式</a></li><li><a href="/chapter3/buttons.html" class="sidebar-link">3.2 按钮</a></li><li><a href="/chapter3/img_and_icon.html" class="sidebar-link">3.3 图片及ICON</a></li><li><a href="/chapter3/radio_and_checkbox.html" class="sidebar-link">3.4 单选开关和复选框</a></li><li><a href="/chapter3/input_and_form.html" class="sidebar-link">3.5 输入框及表单</a></li><li><a href="/chapter3/progress.html" class="sidebar-link">3.6 进度指示器</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/chapter14/chapter4/index.md" class="sidebar-heading clickable"><span>第四章：布局类组件</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/chapter4/intro.html" class="sidebar-link">4.1 布局类组件简介</a></li><li><a href="/chapter4/constraints.html" class="sidebar-link">4.2 布局原理与约束（constraints）</a></li><li><a href="/chapter4/row_and_column.html" class="sidebar-link">4.3 线性布局（Row和Column）</a></li><li><a href="/chapter4/flex.html" class="sidebar-link">4.4 弹性布局（Flex）</a></li><li><a href="/chapter4/wrap_and_flow.html" class="sidebar-link">4.5 流式布局</a></li><li><a href="/chapter4/stack.html" class="sidebar-link">4.6 层叠布局 Stack、Positioned</a></li><li><a href="/chapter4/alignment.html" class="sidebar-link">4.7 对齐与相对定位（Align）</a></li><li><a href="/chapter4/layoutbuilder.html" class="sidebar-link">4.8 LayoutBuilder、AfterLayout</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/chapter5/index" class="sidebar-heading clickable"><span>第五章：容器类组件</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/chapter5/padding.html" class="sidebar-link">5.1 填充（Padding）</a></li><li><a href="/chapter5/constrainedbox_and_sizebox.html" class="sidebar-link">5.2 尺寸限制类容器</a></li><li><a href="/chapter5/decoratedbox.html" class="sidebar-link">5.3 装饰容器DecoratedBox</a></li><li><a href="/chapter5/transform.html" class="sidebar-link">5.4 变换（Transform）</a></li><li><a href="/chapter5/container.html" class="sidebar-link">5.5 Container</a></li><li><a href="/chapter5/clip.html" class="sidebar-link">5.6 剪裁（Clip）</a></li><li><a href="/chapter5/fittedbox.html" class="sidebar-link">5.7 空间适配 FittedBox</a></li><li><a href="/chapter5/material_scaffold.html" class="sidebar-link">5.8 Scaffold</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/chapter6/index" class="sidebar-heading clickable"><span>第六章：可滚动组件</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/chapter6/intro.html" class="sidebar-link">6.1 可滚动组件简介</a></li><li><a href="/chapter6/single_child_scrollview.html" class="sidebar-link">6.2 SingleChildScrollView</a></li><li><a href="/chapter6/listview.html" class="sidebar-link">6.3 ListView</a></li><li><a href="/chapter6/scroll_controller.html" class="sidebar-link">6.4 滚动监听及控制</a></li><li><a href="/chapter6/animatedlist.html" class="sidebar-link">6.5 AnimatedList</a></li><li><a href="/chapter6/gridview.html" class="sidebar-link">6.6 GridView</a></li><li><a href="/chapter6/pageview.html" class="sidebar-link">6.7 PageView与页面缓存</a></li><li><a href="/chapter6/keepalive.html" class="sidebar-link">6.8 可滚动组件子项缓存 KeepAlive</a></li><li><a href="/chapter6/tabview.html" class="sidebar-link">6.9 TabBarView</a></li><li><a href="/chapter6/custom_scrollview.html" class="sidebar-link">6.10 CustomScrollView 和 Slivers</a></li><li><a href="/chapter6/sliver.html" class="sidebar-link">6.11 自定义 Sliver</a></li><li><a href="/chapter6/nestedscrollview.html" class="sidebar-link">6.12 嵌套可滚动组件 NestedScrollView</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/chapter7/index" class="sidebar-heading clickable"><span>第七章：功能型组件</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/chapter7/willpopscope.html" class="sidebar-link">7.1 导航返回拦截（WillPopScope）</a></li><li><a href="/chapter7/inherited_widget.html" class="sidebar-link">7.2 数据共享（InheritedWidget）</a></li><li><a href="/chapter7/provider.html" class="sidebar-link">7.3 跨组件状态共享（Provider）</a></li><li><a href="/chapter7/theme.html" class="sidebar-link">7.4 颜色和主题</a></li><li><a href="/chapter7/value_listenable_builder.html" class="sidebar-link">7.5 ValueListenableBuilder</a></li><li><a href="/chapter7/futurebuilder_and_streambuilder.html" class="sidebar-link">7.6 异步UI更新（FutureBuilder、StreamBuilder）</a></li><li><a href="/chapter7/dailog.html" class="sidebar-link">7.7 对话框详解</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/chapter8/index" class="sidebar-heading clickable"><span>第八章：事件处理与通知</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/chapter8/listener.html" class="sidebar-link">8.1 原始指针事件处理</a></li><li><a href="/chapter8/gesture.html" class="sidebar-link">8.2 手势识别</a></li><li><a href="/chapter8/hittest.html" class="sidebar-link">8.3 Flutter事件机制</a></li><li><a href="/chapter8/gesture_conflict.html" class="sidebar-link">8.4 手势原理与手势冲突</a></li><li><a href="/chapter8/eventbus.html" class="sidebar-link">8.5 事件总线</a></li><li><a href="/chapter8/notification.html" class="sidebar-link">8.6 通知 Notification</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/chapter9/index" class="sidebar-heading clickable"><span>第九章：动画</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/chapter9/intro.html" class="sidebar-link">9.1 Flutter动画简介</a></li><li><a href="/chapter9/animation_structure.html" class="sidebar-link">9.2 动画基本结构及状态监听</a></li><li><a href="/chapter9/route_transition.html" class="sidebar-link">9.3 自定义路由切换动画</a></li><li><a href="/chapter9/hero.html" class="sidebar-link">9.4 Hero动画</a></li><li><a href="/chapter9/stagger_animation.html" class="sidebar-link">9.5 交织动画</a></li><li><a href="/chapter9/animated_switcher.html" class="sidebar-link">9.6 动画切换组件（AnimatedSwitcher）</a></li><li><a href="/chapter9/animated_widgets.html" class="sidebar-link">9.7 动画过渡组件</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/chapter10/index" class="sidebar-heading clickable"><span>第十章：自定义组件</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/chapter10/intro.html" class="sidebar-link">10.1 自定义组件方法简介</a></li><li><a href="/chapter10/combine.html" class="sidebar-link">10.2 组合现有组件</a></li><li><a href="/chapter10/turn_box.html" class="sidebar-link">10.3 组合实例：TurnBox</a></li><li><a href="/chapter10/custom_paint.html" class="sidebar-link">10.4 CustomPaint 与 Canvas</a></li><li><a href="/chapter10/gradient_circular_progress_demo.html" class="sidebar-link">10.5 自绘实例：圆形背景渐变进度条</a></li><li><a href="/chapter10/custom_checkbox.html" class="sidebar-link">10.6 自绘组件：CustomCheckbox</a></li><li><a href="/chapter10/done_widget.html" class="sidebar-link">10.7 自绘组件: DoneWidget</a></li><li><a href="/chapter10/watermark.html" class="sidebar-link">10.8 水印实例: 文本绘制与离屏渲染</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/chapter11/index" class="sidebar-heading clickable"><span>第十一章：文件操作与网络请求</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/chapter11/file_operation.html" class="sidebar-link">11.1 文件操作</a></li><li><a href="/chapter11/http.html" class="sidebar-link">11.2 通过HttpClient发起HTTP请求</a></li><li><a href="/chapter11/dio.html" class="sidebar-link">11.3 Http请求-Dio http库</a></li><li><a href="/chapter11/download_with_chunks.html" class="sidebar-link">11.4 实例：Http分块下载</a></li><li><a href="/chapter11/websocket.html" class="sidebar-link">11.5 使用WebSockets</a></li><li><a href="/chapter11/socket.html" class="sidebar-link">11.6 使用Socket API</a></li><li><a href="/chapter11/json_model.html" class="sidebar-link">11.7 Json转Dart Model类</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/chapter13/index" class="sidebar-heading clickable"><span>第十三章：国际化</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/chapter13/multi_languages_support.html" class="sidebar-link">13.1 让App支持多语言</a></li><li><a href="/chapter13/locallization_implement.html" class="sidebar-link">13.2 实现Localizations</a></li><li><a href="/chapter13/intl.html" class="sidebar-link">13.3 使用Intl包</a></li><li><a href="/chapter13/faq.html" class="sidebar-link">13.4 国际化常见问题</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/chapter14/index" class="sidebar-heading clickable open"><span>第十四章：Flutter核心原理</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/chapter14/flutter_ui_system.html" aria-current="page" class="active sidebar-link">14.1 Flutter UI 框架（Framework）</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/chapter14/element_buildcontext.html" class="sidebar-link">14.2 Element、BuildContext和RenderObject</a></li><li><a href="/chapter14/flutter_app_startup.html" class="sidebar-link">14.3 Flutter启动流程和渲染管线</a></li><li><a href="/chapter14/layout.html" class="sidebar-link">14.4 布局（Layout）过程</a></li><li><a href="/chapter14/paint.html" class="sidebar-link">14.5 绘制（一）绘制原理及Layer</a></li><li><a href="/chapter14/paint_flow.html" class="sidebar-link">14.6 绘制（二）组件树绘制流程</a></li><li><a href="/chapter14/layer.html" class="sidebar-link">14.7 绘制（三）Layer 实例</a></li><li><a href="/chapter14/compositing.html" class="sidebar-link">14.7 绘制（四）Compositing</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>第十五章：一个完整的Flutter应用</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/chapter15/intro.html" class="sidebar-link">15.1 Github客户端示例</a></li><li><a href="/chapter15/code_structure.html" class="sidebar-link">15.2 Flutter APP代码结构</a></li><li><a href="/chapter15/models.html" class="sidebar-link">15.3 Model类定义</a></li><li><a href="/chapter15/globals.html" class="sidebar-link">15.4 全局变量及共享状态</a></li><li><a href="/chapter15/network.html" class="sidebar-link">15.5 网络请求封装</a></li><li><a href="/chapter15/entry.html" class="sidebar-link">15.6 APP入口及主页</a></li><li><a href="/chapter15/login_page.html" class="sidebar-link">15.7 登录页</a></li><li><a href="/chapter15/language_and_theme_setting.html" class="sidebar-link">15.8 多语言和多主题</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_14-1-flutter-ui-框架-framework"><a href="#_14-1-flutter-ui-框架-framework" class="header-anchor">#</a> 14.1 Flutter UI 框架（Framework）</h1> <p>在本书的开始，我们讲过 Flutter 从上到下分为框架层、引擎层和嵌入层三层。也说过开发者基本上都是与框架层打交道，本章将深入介绍一下 Flutter 框架层的原理，在此之前，我们先看看更广义的UI框架指的是什么？解决了什么问题？</p> <p>术语UI框架（UI Framework）特指：基于一个平台，在此平台上实现一个能<strong>快速开发</strong>GUI（图形用户接口）的框架，这里的平台特指操作系统，如Android、iOS或者Windows、macOS。通常来讲平台提供的都是图形 API 都非常的基础，通常就是一个和 Canvas 差不多基础的绘制接口，如果没有UI 框架的封装，可以想象一下，如果没有UI框架的封装，直接用 Canvas 来构建用户界面将会是怎样的一个体验！ 所以，<strong>简单来讲， UI 框架解决的问题就是：如果只提供一个 Canvas，如何来封装一套可以高效创建UI的框架</strong>。</p> <p>我们说过各个平台UI 框架的原理是相通的，也就是说无论是Android还是iOS，他们将一个用户界面展示到屏幕的流程是相似的，所以，在介绍Flutter UI框架之前，我们先看看平台图形处理的基本原理，这样可以帮助读者对操作系统和系统底层UI逻辑有一个清晰的认识。</p> <h3 id="硬件绘图基本原理"><a href="#硬件绘图基本原理" class="header-anchor">#</a> 硬件绘图基本原理</h3> <p>提到原理，我们要从屏幕显示图像的基本原理谈起。我们知道显示器（屏幕）是由一个个物理显示单元组成，每一个单元我们可以称之为一个物理像素点，而每一个像素点可以发出多种颜色，显示器成相的原理就是在不同的物理像素点上显示不同的颜色，最终构成完整的图像。</p> <p>一个像素点能发出的所有颜色总数是显示器的一个重要指标，比如我们所说的1600万色的屏幕就是指一个像素点可以显示出1600万种颜色，而显示器颜色是有RGB三基色组成，所以1600万即2的24次方，即每个基本色（R、G、B）深度扩展至8 bit(位)，颜色深度越深，所能显示的色彩更加丰富靓丽。</p> <p>为了更新显示画面，显示器是以固定的频率刷新（从GPU取数据），比如有一部手机屏幕的刷新频率是 60Hz。当一帧（frame）图像绘制完毕后准备绘制下一帧时，显示器会发出一个垂直同步信号（如vsync）， 60Hz的屏幕就会一秒内发出 60次这样的信号。而这个信号主要是用于同步CPU、GPU和显示器的。一般地来说，计算机系统中，CPU、GPU和显示器以一种特定的方式协作：CPU将计算好的显示内容提交给 GPU，GPU渲染后放入帧缓冲区，然后视频控制器按照同步信号从帧缓冲区取帧数据传递给显示器显示。</p> <p>CPU和GPU的任务是各有偏重的，CPU主要用于基本数学和逻辑计算，而GPU主要执行和图形处理相关的复杂的数学，如矩阵变化和几何计算，GPU的主要作用就是确定最终输送给显示器的各个像素点的色值。</p> <h3 id="操作系统绘制api的封装"><a href="#操作系统绘制api的封装" class="header-anchor">#</a> 操作系统绘制API的封装</h3> <p>由于最终的图形计算和绘制都是由相应的硬件来完成，而直接操作硬件的指令通常都会有操作系统屏蔽，应用开发者通常不会直接面对硬件，操作系统屏蔽了这些底层硬件操作后会提供一些封装后的API供操作系统之上的应用调用，但是对于应用开发者来说，直接调用这些操作系统提供的API是比较复杂和低效的，因为操作系统提供的API往往比较基础，直接调用需要了解API的很多细节。正是因为这个原因，几乎所有用于开发GUI程序的编程语言都会在操作系统之上再封装一层，将操作系统原生API封装在一个编程框架和模型中，然后定义一种简单的开发规则来开发GUI应用程序，而这一层抽象，正是我们所说的“UI框架”，如Android SDK正是封装了Android操作系统API，提供了一个“UI描述文件 XML+Java/Kotlin 操作 DOM”的UI 框架，而iOS的 UIKit  对 View 的抽象也是一样的，他们都将操作系统API抽象成一个基础对象（如用于2D图形绘制的Canvas），然后再定义一套规则来描述UI，如UI树结构，UI 操作的单线程原则等。</p> <h3 id="flutter-ui框架"><a href="#flutter-ui框架" class="header-anchor">#</a> Flutter UI框架</h3> <p>我们可以看到，无论是 Android SDK 还是 iOS 的 UIKit 的职责都是相同的，它们只是语言载体和底层的系统不同而已。那么可不可以实现这么一个UI 框架：可以使用同一种编程语言开发，然后针对不同操作系统API抽象一个对上接口一致，对下适配不同操作系统的的中间层，然后在打包编译时再使用相应的中间层代码？如果可以做到，那么我们就可以使用同一套代码编写跨平台的应用了。而Flutter的原理正是如此，它提供了一套Dart API，然后在底层通过OpenGL这种跨平台的绘制库（内部会调用操作系统API）实现了一套代码跨多端。由于Dart API也是调用操作系统API，所以它的性能接近原生。</p> <blockquote><p>注意，虽然Dart是先调用了OpenGL，OpenGL才会调用操作系统API，但是这仍然是原生渲染，因为OpenGL只是操作系统API的一个封装库，它并不像WebView渲染那样需要 JavaScript 运行环境和CSS渲染器，所以不会有性能损失。</p></blockquote> <p>至此，我们已经介绍了Flutter UI 框架和操作系统交互的这一部分原理，现在需要说一些它对应用开发者定义的开发标准。其实在前面的章节中，我们已经对这个标准非常熟悉了, 简单概括就是：组合和响应式。我们要开发一个UI界面，需要通过组合其它Widget来实现，Flutter中，一切都是Widget，当UI要发生变化时，我们不去直接修改DOM，而是通过更新状态，让Flutter UI 框架来根据新的状态来重新构建UI。</p> <p>讲到这里，读者可能发现Flutter UI 框架和Flutter Framework的概念是差不多的，的确如此，之所以用“UI 框架”，是因为其他平台中可能不这么叫，我们只是为了概念统一，便于描述，读者不必纠结于概念本身。</p> <p>在接下来的小节中，我们先详细介绍一下<code>Element</code>、<code>RenderObject</code>，它们是组成Flutter UI 框架的基石。最后我们再分析一下Flutter应用启动、更新流程。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/chapter13/faq.html" class="prev">
        13.4 国际化常见问题
      </a></span> <span class="next"><a href="/chapter14/element_buildcontext.html">
        14.2 Element、BuildContext和RenderObject
      </a>
      →
    </span></p></div> <div class="copyright"> 版权所有，禁止私自转发、克隆网站。</div> <div class="f-links" style="text-align:center;"><a title="点击购买" target="_blank"> 购买实体书
        </a> |
        <a href="https://github.com/flutterchina">
          Flutter中国开源项目
        </a> |
        <a href="/join_us.html">
          和作者做同事
        </a></div></main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.6f38b3d1.js" defer></script><script src="/assets/js/41.00598830.js" defer></script><script src="/assets/js/2.aa63fc2b.js" defer></script><script src="/assets/js/111.c4e67756.js" defer></script>
  </body>
</html>
